---
layout: post
title: Java - 关于线程
tags: Java
categories: Java
description: Java - AboutThread
---  
**Java线程相关**

<!-- more -->
## 基础知识
#### 1.进程与线程
```text
进程：进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动。进程是操作系统资源分配的基本单位。
线程：线程是进程的一个实体，单个进程中执行中的每个任务就是一个线程。线程是进程中执行运算的最小单位。
```
一个程序至少有一个进程，一个进程至少有一个线程。进程在执行过程中拥有独立的内存单元，而多个线程共享内存。
#### 2.并发与并行
```text
并发指的是多个任务顺序地交替执行，而并行则是真正意义上的‘同时执行’。
```
在单CUP机器上使用多线程时并不能并行，只能通过切换时间片的方式交替进行，而成为并发任务。真正的并行只能出现在多CPU机器上。
#### 3.同步与异步
同步与异步通常来形容一次方法调用。
```text
同步：方法调用一开始，调用者必须等待被调用的方法结束后，调用者后面的代码才能执行。
异步：调用者不用管被调用方法是否完成，都会继续执行后面的代码，当被调用的方法完成后会通知调用者。
```
#### 4.临界区
```text
临界区用来表示一种公共资源或者说是共享数据，可以被多个线程使用。
但是每个线程使用时，一旦临界区资源被某个线程占有，那么其他线程必须等待。
```
#### 5.多线程三大特性
```text
原子性：一个操作或多个操作，要么全部执行且执行过程不会被任何因素打断，要么全部不执行。
可见性：当多个线程访问同一个变量时，一个线程修改了这个变量的值，其他线程能够立即看到修改的值。
有序性：程序执行的顺序按照代码的的先后顺序执行。指令重排不会影响单个线程的执行，但是会影响到线程并发执行的正确性。
```
CPU在执行代码前会对代码顺序进行调整以达到更高的执行效率，这个过程叫指令重排。CPU会保证指令重排后代码执行结果与重排前一致。
## 线程安全
1）线程安全通常来形容一个对象，用来判断此对象在多线程下是否安全。  
2）安全是指在我们不做其他操作的情况下，程序运行结束后调用此对象的结果是否是我们预期的那样。  
3）线程安全问题大多是由**全局变量**及**静态变量**引起的，局部变量逃逸也可能导致线程安全问题。  
```java
public class Test{
    private Integer count = 0;
    
    public void getCount(){
        count ++;
        System.out.println(cout);
    }
}
```
当开启三个线程，每个线程循环10次执行getCount()方法